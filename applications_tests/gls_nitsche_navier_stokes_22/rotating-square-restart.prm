# Listing of Parameters
# ---------------------


# --------------------------------------------------
# Simulation Control
#---------------------------------------------------
subsection simulation control
  set method                  = bdf1
  set number mesh adapt       = 1
  set output name             = rotating-square-restart
  set output frequency        = 1
  set time end                = 1
  set time step		      = 0.25
end

#---------------------------------------------------
# Restart
#---------------------------------------------------
subsection restart
  set checkpoint = false
  set restart    = true
  set filename   = restart
  set frequency  = 1
end

subsection test
    set enable            = true
end

#---------------------------------------------------
# FEM
#---------------------------------------------------
subsection FEM
    set velocity order        = 1
    set pressure order        = 1
end

#---------------------------------------------------
# Force
#---------------------------------------------------
subsection forces
    set verbosity             = quiet   # Output force and torques in log <quiet|verbose>
    set calculate forces      = false     # Enable force calculation
    set calculate torques     = false     # Enable torque calculation files
end

#---------------------------------------------------
# Physical Properties
#---------------------------------------------------
subsection physical properties
    set kinematic viscosity            = 1.0
end

#---------------------------------------------------
# Mesh
#---------------------------------------------------
subsection mesh
	set type = dealii
	set grid type = hyper_ball
	set grid arguments = 0, 0 : 1 : true
	set initial refinement = 3
end

#---------------------------------------------------
# Nitsche
#---------------------------------------------------
subsection nitsche
	set beta = 10
  set calculate torques on solid = false
  set verbosity = verbose
  set number of solids = 1

  subsection nitsche solid 0
	  subsection mesh
		 set type = dealii
		set grid type = hyper_rectangle
		set grid arguments = -0.5, -0.5 : 0.5, 0.5 : true
		set initial refinement = 2
	  end
	  set enable particles motion = true
	  subsection solid velocity
		  set Function expression = -y ; x
	  end
  end
end


# --------------------------------------------------
# Boundary Conditions
#---------------------------------------------------
subsection boundary conditions
  set number                  = 1
    subsection bc 0
    set id = 0
        set type              = noslip
    end
end

# --------------------------------------------------
# Non-Linear Solver Control
#---------------------------------------------------
subsection non-linear solver
  set verbosity               = quiet
  set tolerance               = 1e-8
  set max iterations          = 10
end

# --------------------------------------------------
# Linear Solver Control
#---------------------------------------------------
subsection linear solver
  set verbosity               = quiet
  set method                  = amg
  set max iters               = 500
  set relative residual       = 1e-3
  set minimum residual        = 1e-10
  set ilu preconditioner fill = 3
  set ilu preconditioner absolute tolerance = 1e-12
  set ilu preconditioner relative tolerance = 1.00
  set amg preconditioner ilu fill = 1
  set amg preconditioner ilu absolute tolerance = 1e-12
  set amg preconditioner ilu relative tolerance = 1.00
end
