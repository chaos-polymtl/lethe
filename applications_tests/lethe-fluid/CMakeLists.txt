set(TEST_TARGET lethe-fluid)

string(TOLOWER ${CMAKE_BUILD_TYPE} _build_type)

file(COPY 2d_channel.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")
file(COPY square.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")
file(COPY cylinder_structured.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")
file(COPY taylorCouette.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")
file(COPY box.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")
file(COPY cylinder_manifold.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")
file(COPY 2d-benchmark.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")

file(COPY cavity_ht_average_velocity_restart_files/restart.averagevelocities DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/cavity_ht_average_velocity_restart.${_build_type}/mpirun=1/")
file(COPY cavity_ht_average_velocity_restart_files/restart.pvdhandler DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/cavity_ht_average_velocity_restart.${_build_type}/mpirun=1/")
file(COPY cavity_ht_average_velocity_restart_files/restart.simulationcontrol DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/cavity_ht_average_velocity_restart.${_build_type}/mpirun=1/")
file(COPY cavity_ht_average_velocity_restart_files/restart.triangulation DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/cavity_ht_average_velocity_restart.${_build_type}/mpirun=1/")
file(COPY cavity_ht_average_velocity_restart_files/restart.triangulation.info DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/cavity_ht_average_velocity_restart.${_build_type}/mpirun=1/")
file(COPY cavity_ht_average_velocity_restart_files/restart.triangulation_fixed.data DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/cavity_ht_average_velocity_restart.${_build_type}/mpirun=1/")
file(COPY cavity_ht_average_velocity_restart_files/temperature_statistics.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/cavity_ht_average_velocity_restart.${_build_type}/mpirun=1/")

file(COPY mms-transient-conduction-restart_files/restart.pvdhandler DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/mms-transient-conduction-restart_gls.${_build_type}/mpirun=1/")
file(COPY mms-transient-conduction-restart_files/restart.simulationcontrol DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/mms-transient-conduction-restart_gls.${_build_type}/mpirun=1/")
file(COPY mms-transient-conduction-restart_files/restart.triangulation DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/mms-transient-conduction-restart_gls.${_build_type}/mpirun=1/")
file(COPY mms-transient-conduction-restart_files/restart.triangulation_fixed.data DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/mms-transient-conduction-restart_gls.${_build_type}/mpirun=1/")
file(COPY mms-transient-conduction-restart_files/restart.triangulation.info DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/mms-transient-conduction-restart_gls.${_build_type}/mpirun=1/")
file(COPY mms-transient-conduction-restart_files/L2Error_FD.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/mms-transient-conduction-restart_gls.${_build_type}/mpirun=1/")
file(COPY mms-transient-conduction-restart_files/L2Error_HT.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/mms-transient-conduction-restart_gls.${_build_type}/mpirun=1/")

file(COPY taylor-green-vortex-restart_gls_bdf1/restart.pvdhandler DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart_gls_bdf1/restart.simulationcontrol DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart_gls_bdf1/restart.triangulation DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart_gls_bdf1/restart.triangulation_fixed.data DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart_gls_bdf1/restart.triangulation.info DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart_gls_bdf1/enstrophy.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart_gls_bdf1/kinetic_energy.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart_gls_bdf1/L2Error_FD.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart_gls_bdf1.${_build_type}/mpirun=1/")

file(COPY taylor-green-vortex-restart-bdf1-adaptive/restart.pvdhandler DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart-bdf1-adaptive/restart.simulationcontrol DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart-bdf1-adaptive/restart.triangulation DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart-bdf1-adaptive/restart.triangulation_fixed.data DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart-bdf1-adaptive/restart.triangulation.info DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart-bdf1-adaptive/enstrophy.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart-bdf1-adaptive/kinetic_energy.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")
file(COPY taylor-green-vortex-restart-bdf1-adaptive/L2Error_FD.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/taylor-green-vortex-restart-bdf1-adaptive.${_build_type}/mpirun=1/")

file(COPY cylinder_unstructured.msh DESTINATION "${CMAKE_CURRENT_BINARY_DIR}")

file(COPY poiseuille_restart_files/poiseuille_restart.averagevelocities DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/poiseuille_restart.${_build_type}/mpirun=1/")
file(COPY poiseuille_restart_files/poiseuille_restart.flowcontrol DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/poiseuille_restart.${_build_type}/mpirun=1/")
file(COPY poiseuille_restart_files/poiseuille_restart.pvdhandler DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/poiseuille_restart.${_build_type}/mpirun=1/")
file(COPY poiseuille_restart_files/poiseuille_restart.simulationcontrol DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/poiseuille_restart.${_build_type}/mpirun=1/")
file(COPY poiseuille_restart_files/poiseuille_restart.triangulation DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/poiseuille_restart.${_build_type}/mpirun=1/")
file(COPY poiseuille_restart_files/poiseuille_restart.triangulation_fixed.data DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/poiseuille_restart.${_build_type}/mpirun=1/")
file(COPY poiseuille_restart_files/poiseuille_restart.triangulation.info DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/poiseuille_restart.${_build_type}/mpirun=1/")

file(COPY heat_transfer_vof_lpbf_benchmark_box_ref_restart_files/restart.pvdhandler DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/heat_transfer_vof_lpbf_benchmark_box_ref.${_build_type}/mpirun=1/")
file(COPY heat_transfer_vof_lpbf_benchmark_box_ref_restart_files/restart.simulationcontrol DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/heat_transfer_vof_lpbf_benchmark_box_ref.${_build_type}/mpirun=1/")
file(COPY heat_transfer_vof_lpbf_benchmark_box_ref_restart_files/restart.triangulation DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/heat_transfer_vof_lpbf_benchmark_box_ref.${_build_type}/mpirun=1/")
file(COPY heat_transfer_vof_lpbf_benchmark_box_ref_restart_files/restart.triangulation.info DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/heat_transfer_vof_lpbf_benchmark_box_ref.${_build_type}/mpirun=1/")
file(COPY heat_transfer_vof_lpbf_benchmark_box_ref_restart_files/restart.triangulation_fixed.data DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/heat_transfer_vof_lpbf_benchmark_box_ref.${_build_type}/mpirun=1/")
file(COPY heat_transfer_vof_lpbf_benchmark_box_ref_restart_files/mass_conservation_information.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/heat_transfer_vof_lpbf_benchmark_box_ref.${_build_type}/mpirun=1/")
file(COPY heat_transfer_vof_lpbf_benchmark_box_ref_restart_files/temperature_statistics.checkpoint DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/heat_transfer_vof_lpbf_benchmark_box_ref.${_build_type}/mpirun=1/")

deal_ii_pickup_tests()

if(CMAKE_BUILD_TYPE STREQUAL "Debug")
  set_tests_properties(lethe-fluid/mms3d_isothermal_compressible_ns_gls.debug PROPERTIES TIMEOUT 2000)
  set_tests_properties(lethe-fluid/gls_droplet_marangoni_effect.debug PROPERTIES TIMEOUT 2000)

endif()
